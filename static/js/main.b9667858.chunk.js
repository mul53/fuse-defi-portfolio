(this["webpackJsonpfuse-defi-portfolio"]=this["webpackJsonpfuse-defi-portfolio"]||[]).push([[0],{107:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"getCurrentBlockTimestamp","outputs":[{"name":"timestamp","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"components":[{"name":"target","type":"address"},{"name":"callData","type":"bytes"}],"name":"calls","type":"tuple[]"}],"name":"aggregate","outputs":[{"name":"blockNumber","type":"uint256"},{"name":"returnData","type":"bytes[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getLastBlockHash","outputs":[{"name":"blockHash","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"getEthBalance","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockDifficulty","outputs":[{"name":"difficulty","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockGasLimit","outputs":[{"name":"gaslimit","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getCurrentBlockCoinbase","outputs":[{"name":"coinbase","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"blockNumber","type":"uint256"}],"name":"getBlockHash","outputs":[{"name":"blockHash","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"}]')},108:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},120:function(e,t){},147:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n.n(a),u=n(101),s=n.n(u),i=n(27),c=n(16);function o(e){var t=e.pool;return Object(c.jsxs)("li",{children:[Object(c.jsxs)("div",{children:["Fuseswap ",t.pair.token0.symbol,"/",t.pair.token1.symbol," Pool"," ",100*t.share,"%"]}),Object(c.jsxs)("div",{children:[t.liquidityTokenBalance," UNI-V2"]}),Object(c.jsxs)("div",{children:["$",t.liquidityTokenBalanceUSD]})]})}var p=n(58),l=n(3),d=n.n(l),b=n(48),f=n(82),y=n(159),m=n(160),j=n(161),v=new y.a({link:new m.a({uri:"https://api.thegraph.com/subgraphs/name/fuseio/fuseswap"}),cache:new j.a});function h(e){return O.apply(this,arguments)}function O(){return(O=Object(b.a)(d.a.mark((function e(t){var n,a,r,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(f.a)("\n        query {\n            tokens(where: {\n                id_in: [".concat(t.map((function(e){return'"'.concat(e.toLowerCase(),'"')})).join(","),']\n            }) {\n                id\n                name\n                symbol\n                decimals\n                derivedETH\n            }\n            bundle(id: "1") {\n                ethPrice\n            }\n        }\n    ')),e.next=3,v.query({query:r});case 3:return u=e.sent,e.abrupt("return",{tokens:null===u||void 0===u||null===(n=u.data)||void 0===n?void 0:n.tokens,bundle:null===u||void 0===u||null===(a=u.data)||void 0===a?void 0:a.bundle});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(b.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(f.a)('\n        query {\n            liquidityPositions(where: { \n                user: "'.concat(t.toLowerCase(),'",\n                liquidityTokenBalance_gt: "0"\n            }) {\n                liquidityTokenBalance\n                pair {\n                    id\n                    reserve0\n                    reserve1\n                    token0 {\n                        id\n                        decimals\n                        name\n                        symbol\n                    }\n                    token1 {\n                        id\n                        decimals\n                        name\n                        symbol\n                    }\n                    totalSupply\n                    reserveUSD\n                }\n            }\n        }\n    ')),e.next=3,v.query({query:a});case 3:return r=e.sent,e.abrupt("return",null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.liquidityPositions);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=n(73);function g(){return Object(a.useMemo)((function(){return new w.a.providers.JsonRpcProvider("https://rpc.fuse.io")}),[])}function k(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],u=n[1],s=g();return Object(a.useEffect)((function(){e&&function(e){return x.apply(this,arguments)}(e).then((function(e){var t=e.map((function(e){var t=e.liquidityTokenBalance/e.pair.totalSupply,n=t*e.pair.reserveUSD;return Object(p.a)(Object(p.a)({},e),{},{share:t,liquidityTokenBalanceUSD:n})}));u(t)}))}),[e,s]),r}var S=n(38),M=n(54),q=n.n(M),B=n(72),D=Object(a.createContext)({});function C(){return(C=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("https://service.fuseswap.com/api/v1/tokens");case 2:return t=e.sent,e.abrupt("return",t.data.data.tokens.filter((function(e){return"bridged"===e.type})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("https://api.coingecko.com/api/v3/simple/token_price/ethereum?contract_addresses=".concat(t.map((function(e){return e.foreignAddress})).join(","),"&vs_currencies=usd"));case 2:return n=e.sent,e.abrupt("return",t.map((function(e){return{address:e.address,usd:n.data[e.foreignAddress]?n.data[e.foreignAddress].usd:0}})).reduce((function(e,t){return e[t.address]=t.usd,e}),{}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return U.apply(this,arguments)}function U(){return(U=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(["0x0be9e53fd7edac9f859882afdda116645287c629","0x249be57637d8b013ad64785404b24aebae9b098b"]);case 2:return t=e.sent,e.abrupt("return",t.tokens.map((function(e){return{address:e.id,usd:e.derivedETH*t.bundle.ethPrice}})).reduce((function(e,t){return e[t.address]=t.usd,e}),{}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(b.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:return n=e.sent,e.next=5,T();case 5:return a=e.sent,e.abrupt("return",Object(p.a)(Object(p.a)({},n),a));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){var t=e.children,n=Object(a.useState)([]),r=Object(i.a)(n,2),u=r[0],s=r[1],o=Object(a.useState)(null),p=Object(i.a)(o,2),l=p[0],d=p[1];Object(a.useEffect)((function(){(function(){return C.apply(this,arguments)})().then(s)}),[]),Object(a.useEffect)((function(){u.length&&function(e){return F.apply(this,arguments)}(u).then(d)}),[u]);var b=Object(B.useMemo)((function(){return{tokens:u,quotes:l}}),[l,u]);return Object(c.jsx)(D.Provider,{value:b,children:t})}function L(){return Object(a.useContext)(D)}var A=n(157),N=n(107);function H(e,t,n,r){var u=Object(a.useState)(null),s=Object(i.a)(u,2),c=s[0],o=s[1],p=function(e,t){var n=g();return new w.a.Contract(e,t,n)}("0x3CE6158b7278Bf6792e014FA7B4f3c6c46fe9410",N),l=Object(a.useMemo)((function(){return new A.b(t)}),[t]),d=Object(a.useMemo)((function(){return l.getFunction(n)}),[l,n]),b=Object(a.useMemo)((function(){return d&&r[0].length?l.encodeFunctionData(d,r):void 0}),[l,r,d]),f=Object(a.useMemo)((function(){return d&&e&&e.length>0&&b?e.map((function(e){return e&&b?[e,b]:void 0})):[]}),[e,b,d]);return Object(a.useEffect)((function(){p.aggregate(f).then((function(e){var t=Object(i.a)(e,2)[1].map((function(e){if("0x"!==e)return l.decodeFunctionResult(d,e)}));o(t)}))}),[f]),c}var J=n(108);function $(e){var t=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){q.a.get("https://service.fuseswap.com/api/v1/tokens").then((function(e){if(200===e.status){var t=e.data.data.tokens.filter((function(e){return"bridged"===e.type||"misc"===e.type}));r(t)}}))}),[]),n}(),n=Object(a.useMemo)((function(){return t.map((function(e){return e.address}))}),[t]),r=L().quotes,u=H(n,J,"balanceOf",[e]);return Object(a.useMemo)((function(){return u&&u.length&&t.length&&r?n.map((function(e,n){var a=t.find((function(t){return t.address.toLowerCase()===e.toLowerCase()})),s=u[n][0],i=Object(S.c)(s,a.decimals);return{token:a,balance:i,balanceUSD:r[e.toLowerCase()]*i}})).filter((function(e){return e.balance>0})):[]}),[u,n,r,t])}var I=function(e){var t=e.account,n=function(e){var t=Object(a.useState)("0"),n=Object(i.a)(t,2),r=n[0],u=n[1],s=g(),c=L().quotes;return Object(a.useEffect)((function(){e&&s.getBalance(e).then((function(e){return u(e.toString())}))}),[e,s]),{balance:Object(S.b)(r),balanceUSD:c&&c["0x0be9e53fd7edac9f859882afdda116645287c629"]?c["0x0be9e53fd7edac9f859882afdda116645287c629"]*Object(S.b)(r):0}}(t),r=$(t),u=k(t),s=Object(a.useState)(0),p=Object(i.a)(s,2),l=p[0],d=p[1];return Object(a.useEffect)((function(){var e=n.balanceUSD+r.reduce((function(e,t){return e+t.balanceUSD}),0)+u.reduce((function(e,t){return e+t.liquidityTokenBalanceUSD}),0);d(e)}),[n.balanceUSD,u,r]),Object(c.jsxs)("div",{children:[Object(c.jsxs)("h2",{children:["AccountOverview: ",t]}),Object(c.jsxs)("h2",{children:["Porfolio Value: $",l]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Assets"}),Object(c.jsxs)("ul",{children:[Object(c.jsxs)("li",{children:[Object(c.jsx)("div",{children:"Fuse"}),Object(c.jsx)("div",{children:n.balance}),Object(c.jsxs)("div",{children:["$",n.balanceUSD]})]}),r.map((function(e){return Object(c.jsxs)("li",{children:[Object(c.jsx)("div",{children:e.token.symbol}),Object(c.jsx)("div",{children:e.balance}),Object(c.jsxs)("div",{children:["$",e.balanceUSD]})]})}))]}),Object(c.jsx)("h3",{children:"Liquidity Pools"}),Object(c.jsx)("ul",{children:u.map((function(e){return Object(c.jsx)(o,{pool:e})}))})]})]})};var R=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("header",{className:"App-header",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.target.address.value&&r(e.target.address.value)},children:[Object(c.jsx)("input",{name:"address",type:"text",placeholder:"Enter address"}),Object(c.jsx)("button",{children:"Submit"})]})}),Object(c.jsx)(I,{account:n})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,163)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,u=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),u(e),s(e)}))};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(P,{children:Object(c.jsx)(R,{})})}),document.getElementById("root")),V()}},[[147,1,2]]]);
//# sourceMappingURL=main.b9667858.chunk.js.map